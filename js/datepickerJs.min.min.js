function Datepicker(){var e,f,d=this;this.getMonthDate=function(i,u){var t=[];if(!i||!u){var c=new Date();i=c.getFullYear();u=c.getMonth()+1}var A=new Date(i,u-1,1);i=A.getFullYear();u=A.getMonth()+1;var w=A.getDay();if(w===0){w=7}var D=new Date(i,u-1,0);var z=D.getDate();var x=w-1;var b=new Date(i,u,0);var B=b.getDate();for(var v=0;v<42;v++){var y=v-x+1;var a=y;var C=u;if(y<=0){C=u-1;a=z+y}else{if(y>B){C=u+1;a=a-B}}if(C===0){C=12}if(C===13){C=1}t.push({month:C,date:y,showDate:a})}return{year:i,month:u,days:t}};this.buildUi=function(b,a){e=this.getMonthDate(b,a);var i='<div class="ui-datepicker-header"><a href="#" class="ui-datepicker-btn ui-datepicker-prev-btn">&lt;</a><a href="#" class="ui-datepicker-btn ui-datepicker-next-btn">&gt;</a><span class="ui-datepicker-curr-month">'+e.year+"-"+e.month+'</span></div><div class="ui-datepicker-body"><table><thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead><tbody>';for(var l=0;l<42;l++){var n=e.days[l];if(l%7===0){i+="<tr>"}var m,c;if(Number(n.showDate)>Number(n.date)){m=e.month-1;c="ui-datepicker-bggary"}else{if(n.showDate===n.date){m=e.month;if((new Date()).getDate()===n.date&&(new Date()).getMonth()+1===e.month&&(new Date()).getFullYear()===e.year){c="ui-datepicker-bgnow"}else{c="ui-datepicker-bgdefault"}}else{m=e.month+1;c="ui-datepicker-bggary"}}i+='<td class="'+c+'" data-date="'+e.year+"-"+m+"-"+n.showDate+'">'+n.showDate+"</td>";if(l%7===6){i+="</tr>"}}i+="</tbody></table></div>";return i};this.render=function(b,a){var c=this.buildUi(b,a);if(!f){f=document.createElement("div");f.className="ui-datepicker-wrapper";document.body.appendChild(f)}f.innerHTML=c};this.init=function(h,c,b){this.render(c,b);var a=document.querySelector(h);a.addEventListener("click",function(){if(f.classList.contains("ui-datepicker-wrapper-show")){f.classList.remove("ui-datepicker-wrapper-show")}else{f.classList.add("ui-datepicker-wrapper-show");var g=a.offsetLeft,k=a.offsetTop,l=a.offsetHeight;f.style.top=k+l+2+"px";f.style.left=g+"px"}},false);f.addEventListener("click",function(g){var j=g.target;if(!j.classList.contains("ui-datepicker-btn")){return false}if(j.classList.contains("ui-datepicker-prev-btn")){if(e.month===1){c=e.year-1;b=12}else{c=e.year;b=e.month-1}d.render(c,b)}else{if(e.month===12){c=e.year+1;b=1}else{c=e.year;b=e.month+1}d.render(c,b)}});f.addEventListener("click",function(g){var j=g.target;if(j.tagName.toLowerCase()!=="td"){return false}if(j.classList.contains("ui-datepicker-bggary")){return false}a.value=j.getAttribute("data-date");f.classList.remove("ui-datepicker-wrapper-show")})}};