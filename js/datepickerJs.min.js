function Datepicker(){var a,c,b=this;this.getMonthDate=function(o,m){var n=[];if(!o||!m){var p=new Date();o=p.getFullYear();m=p.getMonth()+1}var f=new Date(o,m-1,1);o=f.getFullYear();m=f.getMonth()+1;var k=f.getDay();if(k===0){k=7}var s=new Date(o,m-1,0);var g=s.getDate();var j=k-1;var q=new Date(o,m,0);var e=q.getDate();for(var l=0;l<42;l++){var h=l-j+1;var r=h;var d=m;if(h<=0){d=m-1;r=g+h}else{if(h>e){d=m+1;r=r-e}}if(d===0){d=12}if(d===13){d=1}n.push({month:d,date:h,showDate:r})}return{year:o,month:m,days:n}};this.buildUi=function(j,k){a=this.getMonthDate(j,k);var g='<div class="ui-datepicker-header"><a href="#" class="ui-datepicker-btn ui-datepicker-prev-btn">&lt;</a><a href="#" class="ui-datepicker-btn ui-datepicker-next-btn">&gt;</a><span class="ui-datepicker-curr-month">'+a.year+"-"+a.month+'</span></div><div class="ui-datepicker-body"><table><thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead><tbody>';for(var f=0;f<42;f++){var d=a.days[f];if(f%7===0){g+="<tr>"}var e,h;if(Number(d.showDate)>Number(d.date)){e=a.month-1;h="ui-datepicker-bggary"}else{if(d.showDate===d.date){e=a.month;if((new Date()).getDate()===d.date&&(new Date()).getMonth()+1===a.month&&(new Date()).getFullYear()===a.year){h="ui-datepicker-bgnow"}else{h="ui-datepicker-bgdefault"}}else{e=a.month+1;h="ui-datepicker-bggary"}}g+='<td class="'+h+'" data-date="'+a.year+"-"+e+"-"+d.showDate+'">'+d.showDate+"</td>";if(f%7===6){g+="</tr>"}}g+="</tbody></table></div>";return g};this.render=function(e,f){var d=this.buildUi(e,f);if(!c){c=document.createElement("div");c.className="ui-datepicker-wrapper";document.body.appendChild(c)}c.innerHTML=d};this.init=function(d,e,f){this.render(e,f);var g=document.querySelector(d);g.addEventListener("click",function(){if(c.classList.contains("ui-datepicker-wrapper-show")){c.classList.remove("ui-datepicker-wrapper-show")}else{c.classList.add("ui-datepicker-wrapper-show");var j=g.offsetLeft,i=g.offsetTop,h=g.offsetHeight;c.style.top=i+h+2+"px";c.style.left=j+"px"}},false);c.addEventListener("click",function(i){var h=i.target;if(!h.classList.contains("ui-datepicker-btn")){return false}if(h.classList.contains("ui-datepicker-prev-btn")){if(a.month===1){e=a.year-1;f=12}else{e=a.year;f=a.month-1}b.render(e,f)}else{if(a.month===12){e=a.year+1;f=1}else{e=a.year;f=a.month+1}b.render(e,f)}});c.addEventListener("click",function(i){var h=i.target;if(h.tagName.toLowerCase()!=="td"){return false}if(h.classList.contains("ui-datepicker-bggary")){return false}g.value=h.getAttribute("data-date");c.classList.remove("ui-datepicker-wrapper-show")})}};